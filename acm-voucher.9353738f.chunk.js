webpackJsonp([0],{1585:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r,u=n(2),d=a(u),o=n(59),s=a(o),c=n(4),l=a(c),m=n(9),f=a(m),p=n(7),y=a(p),h=n(8),v=a(h),b=n(0),T=(a(b),n(274)),g=n(622),x=a(g),k=(i=(0,T.wrapper)(x.default))(r=function(e){function t(){return(0,l.default)(this,t),(0,y.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){return this.props.monkeyKing((0,d.default)({},this.props,{path:"root"}))}}]),t}(b.Component))||r;t.default=k,e.exports=t.default},1586:function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=new b.action(e),n=new A((0,d.default)({},e,{metaAction:t})),a=(0,d.default)({},t,n);return t.config({metaHandlers:a}),a}Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),d=i(u),o=n(277),s=i(o),c=n(275),l=i(c),m=n(276),f=i(m),p=n(4),y=i(p);t.default=r;var h=n(0),v=i(h),b=n(274),T=n(609),g=i(T),x=n(1609),k=a(x),w=n(1610),j=a(w),_=n(180),I=_.Tree.TreeNode,A=function e(t){var n=this;(0,y.default)(this,e),this.onInit=function(e){var t=e.component,a=e.injections;n.component=t,n.injections=a,a.reduce("init"),n.queryTree()},this.queryTree=(0,f.default)(l.default.mark(function e(){var t,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.webapi.businessTypeTemplate.init();case 2:t=e.sent,a={},a.incomeTypes=j.enumToArray(t.paymentsTypeList),a.bizTypes=j.enumToArray(t.businessTypeList),a.types=j.typesToTree(t.businessTypeList),n.injections.reduce("initTree",a),n.injections.reduce("saveData",t);case 9:case"end":return e.stop()}},e,n)})),this.btnClick=function(){n.injections.reduce("modifyContent")},this.addBisness=function(){n.injections.reduce("addBisness")},this.onSearch=function(e){console.log(e)},this.handleSelect=function(e,t){var a=t.node.props["data-code"];n.queryTemplate(a)},this.queryTemplate=function(){var e=(0,f.default)(l.default.mark(function e(t){var a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.webapi.businessTypeTemplate.query({code:t});case 2:a=e.sent,e.t0=a.businessType.code.substr(0,1),e.next="1"===e.t0?6:"2"===e.t0?8:"3"===e.t0?10:"4"===e.t0?12:"5"===e.t0?14:"6"===e.t0?16:18;break;case 6:return a.businessType.typeName="收入",e.abrupt("break",18);case 8:return a.businessType.typeName="支出",e.abrupt("break",18);case 10:return a.businessType.typeName="成本/折旧和摊销",e.abrupt("break",18);case 12:return a.businessType.typeName="存取现金/内部账户互转",e.abrupt("break",18);case 14:return a.businessType.typeName="收款/付款",e.abrupt("break",18);case 16:return a.businessType.typeName="请会计处理",e.abrupt("break",18);case 18:n.injections.reduce("initTemplate",a),n.injections.reduce("initForm",n.transData4List(a));case 20:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}(),this.handleCheck=function(){},this.transData4List=function(e){var t=e.tacticsList,n=e.docTemplateList,a=[],i={};return t.map(function(e){var t={};t.invoiceType=k.ticketType.filter(function(t){return t.id==e.invoiceId})[0].name;for(var n in k.columns)!function(n){var a=e.details.filter(function(e){return e.columnsId==k.columns[n].id})[0]||{};t[n]=a.flag||""}(n);a.push(t)}),i.interface={other:{focusCellInfo:void 0},list:a},i.rule={other:{focusCellInfo:void 0},list:n[0].details},i},this.getTreeNode=function(e){return function e(t){var n=[],a=!0,i=!1,r=void 0;try{for(var u,d=(0,s.default)(t);!(a=(u=d.next()).done);a=!0){var o=u.value;o.subTypes?n.push(v.default.createElement(I,{className:"z-tree-parent",title:o.name,key:o.id,"data-code":o.code},e(o.subTypes))):n.push(v.default.createElement(I,{className:"z-tree-leaf",title:o.name,key:o.id,"data-code":o.code}))}}catch(e){i=!0,r=e}finally{try{!a&&d.return&&d.return()}finally{if(i)throw r}}return n}(e)},this.getTreeChild=function(){if(!n.metaAction.gf("data.tree"))return[];var e=n.metaAction.gf("data.tree").toJS();return n.getTreeNode(e)},this.nameChange=function(e){},this.isFocusCell=function(e,t,a){var i="rule"==a?n.metaAction.gf("data.rule.other.focusCellInfo"):n.metaAction.gf("data.interface.other.focusCellInfo");return!!i&&(i.columnKey==t&&i.rowIndex==e.rowIndex)},this.cellClick=function(e,t,a){return function(i){i.stopPropagation(),"rule"==a?n.metaAction.sf("data.interface.rule.focusCellInfo",{rowIndex:e.rowIndex,columnKey:t}):n.metaAction.sf("data.interface.other.focusCellInfo",{rowIndex:e.rowIndex,columnKey:t})}},this.handleChange=function(e,t,n,a){},this.cellGetterRule=function(e){return function(t){var a=n.metaAction.gf("data.rule.list."+t.rowIndex+"."+e),i=a;return n.isFocusCell(t,e,"rule")?v.default.createElement(_.Input,{className:"mk-app-editable-table-cell",onChange:n.nameChange(t),value:a,ref:function(e){return n.refName=e}}):v.default.createElement(_.DataGrid.TextCell,{onClick:n.cellClick(t,e,"rule"),value:i})}},this.cellGetter=function(e){return function(t){var a=n.metaAction.gf("data.interface.list."+t.rowIndex+"."+e),i=a;return n.isFocusCell(t,e)?v.default.createElement(_.Input,{className:"mk-app-editable-table-cell",onChange:n.nameChange(t),value:a,ref:function(e){return n.refName=e}}):v.default.createElement(_.DataGrid.TextCell,{onClick:n.cellClick(t,e),value:i})}},this.addInvoiceType=(0,f.default)(l.default.mark(function e(){var t,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.metaAction.modal("show",{title:"新增/编辑界面元数据",width:900,children:n.metaAction.loadApp("interface-data-card",{store:n.component.props.store})});case 2:if(!(t=e.sent)){e.next=8;break}return e.next=6,n.webapi.education.query();case 6:a=e.sent,n.metaAction.sfs({"data.other.educationDataSource":fromJS(a),"data.form.education":fromJS(t)});case 8:case"end":return e.stop()}},e,n)})),this.newInvoiceRule=(0,f.default)(l.default.mark(function e(){var t,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.metaAction.modal("show",{title:"新增/编辑凭证规则：",width:900,children:n.metaAction.loadApp("invoice-rule",{store:n.component.props.store})});case 2:if(!(t=e.sent)){e.next=8;break}return e.next=6,n.webapi.education.query();case 6:a=e.sent,n.metaAction.sfs({"data.other.educationDataSource":fromJS(a),"data.form.education":fromJS(t)});case 8:case"end":return e.stop()}},e,n)})),this.newInvoiceRule2=(0,f.default)(l.default.mark(function e(){var t,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.metaAction.modal("show",{title:"新增/编辑凭证规则2：",width:400,children:n.metaAction.loadApp("invoice-rule2",{store:n.component.props.store})});case 2:if(!(t=e.sent)){e.next=8;break}return e.next=6,n.webapi.education.query();case 6:a=e.sent,n.metaAction.sfs({"data.other.educationDataSource":fromJS(a),"data.form.education":fromJS(t)});case 8:case"end":return e.stop()}},e,n)})),this.metaAction=t.metaAction,this.config=g.default.current,this.webapi=this.config.webapi};e.exports=t.default},1587:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=new c.reducer(e),n=new p((0,u.default)({},e,{metaReducer:t}));return(0,u.default)({},t,n)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),u=a(r),d=n(4),o=a(d);t.default=i;var s=n(80),c=n(274),l=n(609),m=a(l),f=n(623),p=function e(t){var n=this;(0,o.default)(this,e),this.init=function(e,t){var a=(0,f.getInitState)();return n.metaReducer.init(e,a)},this.modifyContent=function(e){var t=n.metaReducer.gf(e,"data.content");return n.metaReducer.sf(e,"data.content",t+"!")},this.addBisness=function(e){return e},this.initTree=function(e,t){return e=n.metaReducer.sf(e,"data.tree",(0,s.fromJS)(t.types))},this.saveData=function(e,t){return e=n.metaReducer.sf(e,"data.store",(0,s.fromJS)(t))},this.initTemplate=function(e,t){return n.metaReducer.sf(e,"data.templateData",(0,s.fromJS)(t))},this.initForm=function(e,t){return e=n.metaReducer.sf(e,"data.interface.list",(0,s.fromJS)(t.interface.list)),e=n.metaReducer.sf(e,"data.rule.list",(0,s.fromJS)(t.rule.list))},this.metaReducer=t.metaReducer,this.config=m.default.current};e.exports=t.default},1609:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.settlementType={xj:{id:1,name:"现金"},yh:{id:2,name:"银行"},wx:{id:3,name:"微信"},zfb:{id:4,name:"支付宝"},cjysk:{id:5,name:"冲减预收款"},cjyfk:{id:6,name:"冲减预付款"},khqk:{id:7,name:"客户欠款"},qgysk:{id:8,name:"欠供应商款"},cygjk:{id:9,name:"冲员工借款"},ygdf:{id:10,name:"员工垫付"}},t.accountType={xj:{id:98,name:"现金"},yh:{id:99,name:"银行"},wx:{id:100,name:"微信"},zfb:{id:101,name:"支付宝"},ys:{id:152,name:"应收"},yf:{id:153,name:"应付"},gr:{id:154,name:"个人"},ygdf:{id:155,name:"员工垫付"}},t.commonAccountId={xj:{id:4,name:"现金"},cjysk:{id:5,name:"冲减预收款"},khqk:{id:6,name:"暂不支付"},cjyfk:{id:7,name:"冲减预付款"},qgysk:{id:8,name:"暂不支付"},cygjk:{id:9,name:"冲员工借款"},ygdf:{id:10,name:"员工垫付"}},t.ticketType=[{id:0xb5e620f48032,code:"001",name:"增值税普通发票"},{id:0xb5e620f48033,code:"002",name:"增值税专用发票"},{id:0xb5e620f48034,code:"003",name:"其他票据"},{code:"004",id:0xb5e620f48035,name:"海关进口增值税专用缴款书"},{code:"005",id:0xb5e620f48036,name:"农产品发票"},{code:"006",id:0xb5e620f48037,name:"其他发票"},{code:"007",id:0xb5e620f48038,name:"其他发票(可抵扣)"},{code:"008",id:0xb5e620f48039,name:"未开票"}],t.incomeType={sr:{id:1e4,code:"10",name:"收入"},zc:{id:10001,code:"20",name:"支出"},cbzjtx:{id:10002,code:"30",name:"成本/折扣和摊销"},cqxj:{id:10003,code:"40",name:"存取现金/内部账户互转"},sk:{id:10004,code:"50",name:"收款/付款"},kj:{id:10005,code:"60",name:"请会计处理"}},t.industryType={gy:{id:1,name:"工业"},sm:{id:2,name:"商贸"},fw:{id:3,name:"服务"},qt:{id:4,name:"其他"}},t.vatTaxpayerType={ybnsr:{id:41,name:"一般纳税人"},xgmnsr:{id:42,name:"小规模纳税人"}},t.taxRateType={hundred:{id:100,name:"100%",value:1},seventeen:{id:17,name:"17%",value:.17},thirteen:{id:13,name:"13%",value:.13},eleven:{id:11,name:"11%",value:.11},six:{id:6,name:"6%",value:.06},five:{id:5,name:"5%",value:.05},four:{id:4,name:"4%",value:.04},three:{id:3,name:"3%",value:.03},two:{id:2,name:"3%减按2%",value:.03},oneHalf:{id:1,name:"1.5%",value:.015},zero:{id:0,name:"0%",value:0},nothing:{id:1e3,name:"免税",value:0}},t.columns={noTaxAmount:{id:1,name:"金额"},amount:{id:2,name:"价税合计"},tax:{id:3,name:"税额"},department:{id:4,name:"部门"},employee:{id:5,name:"人员"},customer:{id:6,name:"客户"},goods:{id:7,name:"商品或服务名称"},assetsType:{id:8,name:"资产类别"},assets:{id:9,name:"资产"},number:{id:10,name:"数量"},price:{id:11,name:"单价"},settlement:{id:12,name:"结算方式"},abstract:{id:13,name:"摘要"},bankAccount:{id:14,name:"银行账户"},billNumber:{id:15,name:"票据号"},taxRate:{id:16,name:"税率"},isDeduct:{id:17,name:"抵扣"},investmentObject:{id:18,name:"投资对象"},investmentType:{id:19,name:"投资类别"},investor:{id:20,name:"  投资人"},creditor:{id:21,name:"债权人"},obligor:{id:22,name:"债务人"},penaltyType:{id:23,name:"罚款性质"},loanTerm:{id:24,name:"借款期限"},incomeAccount:{id:25,name:"收款账户"},project:{id:26,name:"项目"},invoiceNO:{id:27,name:"票据编码"},billingDate:{id:28,name:"开票日期"},isQualification:{id:29,name:"认证"},certificationMonth:{id:30,name:"认证月份"},deductibleInputTax:{id:31,name:"可抵扣进项税额"},ext0:{id:1e3,name:"自定义项0"},ext1:{id:1001,name:"自定义项1"},ext2:{id:1002,name:"自定义项2"},ext3:{id:1003,name:"自定义项3"},ext4:{id:1004,name:"自定义项4"},ext5:{id:1005,name:"自定义项5"},ext6:{id:1006,name:"自定义项6"},ext7:{id:1007,name:"自定义项7"},ext8:{id:1008,name:"自定义项8"},ext9:{id:1009,name:"自定义项9"},extString0:{id:1020,name:"字符自定义项0"},extString1:{id:1021,name:"字符自定义项1"},extString2:{id:1022,name:"字符自定义项2"},extString3:{id:1023,name:"字符自定义项3"},extString4:{id:1024,name:"字符自定义项4"}},t.statusType={normal:{value:2,label:"未审核"},audit:{value:3,label:"已审核"},draft:{value:1,label:"暂存"},reject:{value:4,label:"驳回"}},t.sourceVoucherType={lsz:{id:109,name:"流水账"},yhdzd:{id:147,name:"银行对账单"},gzd_gz_jt:{id:100001,name:"工资单-工资-计提"},gzd_sb_jt:{id:100002,name:"工资单-社保-计提"},gzd_zfgjj_jt:{id:100003,name:"工资单-住房公积金-计提"},gzd_gz_ff:{id:100004,name:"工资单-工资-发放"},gzd_sb_jn:{id:100005,name:"工资单-社保-缴纳"},gzd_zfgjj_jn:{id:100006,name:"工资单-住房公积金-缴纳"},gzd_gs_jn:{id:100007,name:"工资单-个税-缴纳"}}},1610:function(e,t,n){"use strict";function a(e,t){var n=findType(t,null,e),a=[];return n?(function e(t){t&&t.forEach(function(t){a.push(t.get("id").toString()),t.get("subTypes")&&e(t.get("subTypes"))})}(n.get("subTypes")),a):a}function i(e){return e.enumDetail?e.enumDetail.map(function(e,t){return{id:parseInt(e.enumItemId),name:e.enumItemName}}):e.map(function(e,t){return{id:parseInt(e.id),name:e.name}})}function r(e){var t=[],n=!0,a=!1,i=void 0;try{for(var r,u=(0,d.default)(e);!(n=(r=u.next()).done);n=!0){var o=r.value;if(2==o.code.length&&t.push(o),6==o.code.length){var s=t[t.length-1];s.subTypes||(s.subTypes=[]),s.subTypes.push(o)}if(10==o.code.length){if(!t[t.length-1].subTypes)return void alert("编码"+o.code+"业务类型找不到父级，请联系元数据维护人员");var c=t[t.length-1].subTypes[t[t.length-1].subTypes.length-1];c.subTypes||(c.subTypes=[]),c.subTypes.push(o)}}}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return t}Object.defineProperty(t,"__esModule",{value:!0});var u=n(277),d=function(e){return e&&e.__esModule?e:{default:e}}(u);t.getChildTypeIds=a,t.enumToArray=i,t.typesToTree=r}});