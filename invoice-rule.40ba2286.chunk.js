webpackJsonp([8],{1579:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r,u=a(2),o=n(u),l=a(59),d=n(l),c=a(4),f=n(c),s=a(9),m=n(s),h=a(7),p=n(h),v=a(8),b=n(v),w=a(0),g=(n(w),a(274)),x=a(618),C=n(x),y=(i=(0,g.wrapper)(C.default))(r=function(e){function t(){return(0,f.default)(this,t),(0,p.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,b.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){return this.props.monkeyKing((0,o.default)({},this.props,{path:"root"}))}}]),t}(w.Component))||r;t.default=y,e.exports=t.default},1580:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=new b.action(e),a=new M((0,u.default)({},e,{metaAction:t})),n=(0,u.default)({},t,a);return t.config({metaHandlers:n}),n}Object.defineProperty(t,"__esModule",{value:!0});var r=a(2),u=n(r),o=a(275),l=n(o),d=a(276),c=n(d),f=a(4),s=n(f);t.default=i;var m=a(0),h=n(m),p=a(13),v=n(p),b=a(274),w=a(607),g=n(w),x=a(180),C=a(80),y=a(10),I=n(y),M=function e(t){var a=this;(0,s.default)(this,e),this.onInit=function(e){var t=e.component,n=e.injections;a.component=t,a.injections=n,n.reduce("init"),a.load()},this.load=(0,c.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.webapi.editableTable.query();case 2:t=e.sent,a.injections.reduce("load",t);case 4:case"end":return e.stop()}},e,a)})),this.save=(0,c.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.metaAction.gf("data.list").toJS(),t=t.filter(function(e){return e.name||e.mobile}).map(function(e){return(0,u.default)({},e,{birthday:e.birthday?e.birthday.format("YYYY-MM-DD"):e.birthday})}),e.next=4,a.webapi.editableTable.save(t);case 4:a.metaAction.toast("success","保存成功"),a.load();case 6:case"end":return e.stop()}},e,a)})),this.addrow=function(e){a.injections.reduce("addEmptyRow",e.rowIndex+1)},this.delrow=function(e){var t=a.metaAction.gf("data.list"),n=t.getIn([e.rowIndex,"id"]);a.injections.reduce("delrow",n)},this.isFocusCell=function(e,t){var n=a.metaAction.gf("data.other.focusCellInfo");return!!n&&(n.columnKey==t&&n.rowIndex==e.rowIndex)},this.nameChange=function(e){return function(t){a.metaAction.sf("data.list."+e.rowIndex+".name",t.target.value)}},this.mobileChange=function(e){return function(t){a.metaAction.sf("data.list."+e.rowIndex+".mobile",t)}},this.birthdayChange=function(e){return function(t){a.metaAction.sf("data.list."+e.rowIndex+".birthday",t)}},this.sexChange=function(e){return function(t){if(!t)return void a.metaAction.sf("data.list."+e.rowIndex+".sex",void 0);a.metaAction.sf("data.list."+e.rowIndex+".sex",0==t?(0,C.Map)({value:0,text:"男"}):(0,C.Map)({value:1,text:"女"}))}},this.cellClick=function(e,t){return function(n){n.stopPropagation(),a.metaAction.sf("data.other.focusCellInfo",{rowIndex:e.rowIndex,columnKey:t}),"name"==t?setTimeout(function(){v.default.findDOMNode(a.refName).select()},0):"mobile"==t&&setTimeout(function(){v.default.findDOMNode(a.refMobile).select()},0)}},this.cellGetter=function(e){return function(t){var n=a.metaAction.gf("data.list."+t.rowIndex+"."+e),i=n;return"birthday"==e?i=n?n.format("YYYY-MM-DD"):n:"sex"==e&&(i=n?n.get("text"):""),a.isFocusCell(t,e)?"name"==e?h.default.createElement(x.Input,{className:"mk-app-editable-table-cell",onChange:a.nameChange(t),value:n,ref:function(e){return a.refName=e}}):"mobile"==e?h.default.createElement(x.Input.Number,{className:"mk-app-editable-table-cell",onChange:a.mobileChange(t),value:n,ref:function(e){return a.refMobile=e}}):"birthday"==e?h.default.createElement(x.DatePicker,{className:"mk-app-editable-table-cell",onChange:a.birthdayChange(t),value:(0,I.default)(n)}):"sex"==e?h.default.createElement(x.Select,{className:"mk-app-editable-table-cell",allowClear:!0,onChange:a.sexChange(t),value:n?n.get("value")+"":void 0},h.default.createElement(Option,{value:"0"},"男"),h.default.createElement(Option,{value:"1"},"女")):void 0:h.default.createElement(x.DataGrid.TextCell,{onClick:a.cellClick(t,e),value:i})}},this.metaAction=t.metaAction,this.config=g.default.current,this.webapi=this.config.webapi};e.exports=t.default},1581:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=new c.reducer(e),a=new v((0,u.default)({},e,{metaReducer:t}));return(0,u.default)({},t,a)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(2),u=n(r),o=a(4),l=n(o);t.default=i;var d=a(80),c=a(274),f=a(607),s=n(f),m=a(619),h=a(10),p=n(h),v=function e(t){var a=this;(0,l.default)(this,e),this.init=function(e,t){var n=(0,m.getInitState)();return a.metaReducer.init(e,n)},this.load=function(e,t){return t.list.forEach(function(e){return e.birthday=(0,p.default)(e.birthday)}),e=a.metaReducer.sf(e,"data.list",(0,d.fromJS)(t.list)),a.metaReducer.sf(e,"data.other.focusCellInfo",void 0)},this.addEmptyRow=function(e,t){var n=a.metaReducer.gf(e,"data.list");return n=n.insert(t,(0,d.Map)({id:n.size})),a.metaReducer.sf(e,"data.list",n)},this.delrow=function(e,t){var n=a.metaReducer.gf(e,"data.list"),i=n.findIndex(function(e){return e.get("id")==t});return-1==i?e:(n=n.remove(i),a.metaReducer.sf(e,"data.list",n))},this.metaReducer=t.metaReducer,this.config=s.default.current};e.exports=t.default}});